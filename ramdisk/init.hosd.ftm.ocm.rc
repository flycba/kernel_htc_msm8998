###########################
# init.hosd.ftm.ocm.rc #
###########################

on late-ftm
    # [HTC_BT] +++
    mkdir /bt_firmware 0771 system system
    wait /dev/block/bootdevice/by-name/bluetooth
    mount vfat /dev/block/bootdevice/by-name/bluetooth /bt_firmware ro shortname=lower,uid=1002,gid=3002,dmask=227,fmask=337,context=u:object_r:bt_firmware_file:s0
    # [HTC_BT] ---

# for Felica Calibaration
       chmod 0666 /sys/class/SONY_FELICA/cxd224x/seteem
       chmod 0666 /sys/class/SONY_FELICA/cxd224x/geteem
       chmod 0666 /sys/class/SONY_FELICA/cxd224x/setreg
       chmod 0666 /sys/class/SONY_FELICA/cxd224x/getreg
       chmod 0666 /sys/class/SONY_FELICA/cxd224x/mfg_nfc_ctrl

# HTC_WIFI_START
    start cnss-daemon

# For slpi
    write /sys/kernel/boot_slpi/boot 1

service cnss-daemon /system/vendor/bin/cnss-daemon -n -l
    class late_start
    user system
    group system inet net_admin wifi
# HTC_WIFI_END
#Set 2LC as default ftm cpu policy
on property:ro.boot.mode=ftm
	write /sys/module/msm_thermal/parameters/enabled N
	write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1248000
        write /sys/devices/system/cpu/cpu1/cpufreq/scaling_max_freq 1248000
        write /sys/module/msm_thermal/core_control/cpus_offlined 252
        write /sys/devices/system/cpu/cpu2/online 0
        write /sys/devices/system/cpu/cpu3/online 0
        write /sys/devices/system/cpu/cpu4/online 0
        write /sys/devices/system/cpu/cpu5/online 0
        write /sys/devices/system/cpu/cpu6/online 0
        write /sys/devices/system/cpu/cpu7/online 0
        write /sys/devices/system/cpu/cpu2/sched_budget 0
        write /sys/devices/system/cpu/cpu3/sched_budget 0
        write /sys/devices/system/cpu/cpu4/sched_budget 0
        write /sys/devices/system/cpu/cpu5/sched_budget 0
        write /sys/devices/system/cpu/cpu6/sched_budget 0
        write /sys/devices/system/cpu/cpu7/sched_budget 0

